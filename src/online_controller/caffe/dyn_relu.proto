name: "JointStateRegressionNet"

layer {
    name: "data"
    type: "HDF5Data"
    top: "data"
    top: "label"
    hdf5_data_param {
        source: "caffe/dyndata_plane.txt"
        batch_size: 100
    }
    include: { phase: TRAIN }
}

layer {
    name: "data"
    type: "HDF5Data"
    top: "data"
    top: "label"
    hdf5_data_param {
        source: "caffe/dyndata_plane.txt"
        batch_size: 100
    }
    include: {
    phase: TEST
    stage: 'test-on-train'
    }
}

layer {
    name: "data"
    type: "HDF5Data"
    top: "data"
    top: "label"
    hdf5_data_param {
        source: "caffe/dyndata_plane_relu.txt"
        batch_size: 50
    }
    include: { 
    phase: TEST 
    stage: "test-on-val"
    }
}

layer {
    name: "ip1"
    type: "InnerProduct"
    bottom: "data"
    top: "ip1"
    inner_product_param {
        num_output: 100
        weight_filler {
            type: "gaussian"
            std: 0.01
        }
        bias_filler {
            type: "gaussian"
            std: 0.01
        }
    }
}

layer {
    name: "relu1"
    type: "ReLU"
    bottom: "ip1"
    top: "ip1"
}

layer {
    name: "drop1"
    type: "Dropout"
    bottom: "ip1"
    top: "drop1"
    dropout_param{
        dropout_ratio: 0.5
    }
}

layer {
    name: "ip2"
    type: "InnerProduct"
    bottom: "drop1"
    top: "ip2"
    inner_product_param {
        num_output: 39
        weight_filler {
            type: "gaussian"
            std: 0.01
        }
        bias_filler {
            type: "gaussian"
            std: 0.01
        }
    }
}

layer {
    name: "loss"
    type: "EuclideanLoss"
    bottom: "ip2"
    bottom: "label"
    top: "euclidean_error"
    loss_weight: 1 }
